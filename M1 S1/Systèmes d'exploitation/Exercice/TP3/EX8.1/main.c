#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>

void copier(int fdsrc, int fddst) {
    char buf[1024];
    ssize_t bytes;

    while ((bytes = read(fdsrc, buf, sizeof(buf))) > 0) {
        write(fddst, buf, bytes);
    }
    if (bytes == -1) {
        perror("Erreur");
    }
}

int main() {
    int tube[2];
    pid_t pid;
    if (pipe(tube) == -1) {
        exit(0);
    }

    pid = fork();
    switch (pid)
    {
    case -1:

    case 0:
        close(tube[1]);
        copier(tube[0],1);
        close(tube[0]);
        exit(0);
    default:
        close(tube[0]);
        copier(0, tube[1]);
        close(tube[1]);
        wait(NULL);
    }
    return 0;
}