#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/wait.h>

int main() {
    pid_t pid = fork();            
    int status;

    switch (pid) {
        case -1 :
            perror("Erreur lors de la création du processus");
            break;

        case 0 :
            pid_t fils_pid = getpid();
            pid_t pere_pid = getppid();
            printf("Processus fils : PID = %d, PID père = %d\n", fils_pid, pere_pid);

            int retour = fils_pid % 10;
            exit(retour);

        default :
            printf("Processus père : PID fils = %d\n", pid);

            wait(&status);
            
            if (WIFEXITED(status)) {
                int code_retour = WEXITSTATUS(status);
                printf("Le processus fils s'est terminé avec le code de retour : %d\n", code_retour);
            } else {
                printf("Le processus fils ne s'est pas terminé correctement\n");
            }
    }

    return 0;
}